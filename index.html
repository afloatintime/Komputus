<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Komputus - Calculadora Matem√°tica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Portfolio CSS (Neumorphic Style) */
        :root {
          --bg-color: #f2f3f7;
          --fg-color: #7b7e8c;
          --red: #E43030;
          --green: #19A187;
          --blue: #367bf0;
          --dark-blue: #265AB1;
          --maroon: #B8174C;
          --purple: #8C42AB;
          --cyan: #17A2B8;
          --yellow: #FFC107;

          /* Komputus specific variables */
          --primary-gradient: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 50%, #03a9f4 100%);
          --secondary-gradient: linear-gradient(135deg, #81c784 0%, #66bb6a 50%, #4caf50 100%);
          --glass-bg: rgba(255, 255, 255, 0.15);
          --glass-border: rgba(255, 255, 255, 0.2);
          --text-light: #ffffff;
          --text-dark: #2c3e50;
          --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          --glow: 0 0 20px rgba(79, 195, 247, 0.3);
          --backdrop: blur(10px);
        }

        [data-theme="dark"] {
            --primary-gradient: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%);
            --secondary-gradient: linear-gradient(135deg, #059669 0%, #0d9488 50%, #0f766e 100%);
            --glass-bg: rgba(0, 0, 0, 0.3);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-light: #e1f5fe;
            --text-dark: #2c3e50;
            --bg-color: #1a1a2e;
            --fg-color: #a0a3b1;
        }

        /* Neumorphic base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-color);
            color: var(--fg-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-x: hidden;
            background-image:
                radial-gradient(circle at 20% 20%, rgba(79, 195, 247, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(79, 195, 247, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(79, 195, 247, 0.1) 0%, transparent 50%);
        }

        /* Neumorphic elements */
        .neumorphic {
            box-shadow: 6px 6px 10px rgba(0, 0, 0, 0.1), -6px -6px 10px white;
            border-radius: 10px;
            background: var(--bg-color);
        }

        .neumorphic-inset {
            border-radius: 10px;
            box-shadow: inset 3px 3px 5px rgba(0, 0, 0, 0.1), inset -3px -3px 5px white;
            background: var(--bg-color);
        }

        .neumorphic-button {
            border: 0;
            text-transform: capitalize;
            padding: 10px 0;
            width: 8em;
            text-align: center;
            cursor: pointer;
            color: inherit;
            font-size: 1.1rem;
            transition-property: background-color, box-shadow;
            transition-delay: .2s;
            transition-duration: .2s;
            box-shadow: 6px 6px 10px rgba(0, 0, 0, 0.1), -6px -6px 10px white;
            border-radius: 10px;
            background: var(--bg-color);
        }

        .neumorphic-button:hover {
            transform: translateY(-2px);
            box-shadow: 8px 8px 15px rgba(0, 0, 0, 0.15), -8px -8px 15px white;
        }

        .neumorphic-button:active {
            box-shadow: inset 3px 3px 5px rgba(0, 0, 0, 0.1), inset -3px -3px 5px white;
            transform: translateY(0);
        }

        .blue-button {
            color: white;
            font-weight: bold;
            background: var(--blue);
            box-shadow: 0 0 0.5em rgba(54, 123, 240, 0.7), 0 0 transparent, inset 0 -5px 0 rgba(0, 0, 0, 0.05), inset 0 2px 0 rgba(255, 255, 255, 0.2);
            border-radius: 6px 6px 8px 8px;
            transition-property: box-shadow, border-radius;
        }

        .blue-button:active {
            background: var(--blue);
            border-radius: 6px;
            box-shadow: 0 0 transparent, 0 0 transparent, inset 0 2px 5px 2px rgba(0, 0, 0, 0.2);
        }

        /* Header styles */
        header {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop);
            border-bottom: 1px solid var(--glass-border);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }

        .theme-toggle {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.2rem;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--glow);
        }

        /* Main content */
        main {
            flex: 1;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        .calculator-container {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 2rem;
        }

        /* Navigation tabs */
        .nav-tabs {
            display: flex;
            background: var(--secondary-gradient);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .nav-tab.active {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop);
            border-bottom-color: #4fc3f7;
            color: var(--text-dark);
            text-shadow: none;
        }

        /* Tab content */
        .tab-content {
            display: none;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: var(--backdrop);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .year-separator {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #0277bd;
            font-weight: 600;
            text-align: center;
            padding: 0.5rem;
            background: linear-gradient(90deg, transparent, rgba(79, 195, 247, 0.2), transparent);
            border-radius: 8px;
        }

        /* Form elements */
        .input-group {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        input, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            color: var(--text-dark);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 0 3px rgba(79, 195, 247, 0.2);
            transform: translateY(-1px);
        }

        /* Buttons */
        button {
            background: var(--primary-gradient);
            color: var(--text-light);
            border: none;
            border-radius: 8px;
            padding: 0.8rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        button:active {
            transform: translateY(0);
        }

        /* Results */
        .results {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(240, 248, 255, 0.9));
            border-radius: 10px;
            border-left: 4px solid #4fc3f7;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(5px);
        }

        .results p {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .results strong {
            color: #0277bd;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop);
            color: var(--text-light);
            border-top: 1px solid var(--glass-border);
            margin-top: auto;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            main {
                padding: 1rem;
            }
            h1 {
                font-size: 2rem;
            }
            .nav-tab {
                padding: 0.8rem 1rem;
                font-size: 0.9rem;
            }
            .tab-content {
                padding: 1.5rem;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4fc3f7, #29b6f6);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #29b6f6, #4fc3f7);
        }
    </style>
</head>
<body>
    <header>
        <h1>Komputus</h1>
        <button class="theme-toggle neumorphic-button" id="themeToggle" aria-label="Alternar tema">
            <i class="fas fa-moon"></i>
        </button>
    </header>

    <main>
        <div class="calculator-container neumorphic">
            <div class="nav-tabs">
                <div class="nav-tab active" data-tab="quadratica" tabindex="0" role="tab" aria-selected="true">Fun√ß√£o Quadr√°tica</div>
                <div class="nav-tab" data-tab="potenciacao" tabindex="0" role="tab" aria-selected="false">Potencia√ß√£o</div>
                <div class="nav-tab" data-tab="logaritmo" tabindex="0" role="tab" aria-selected="false">Logaritmo</div>
                <div class="nav-tab" data-tab="pa" tabindex="0" role="tab" aria-selected="false">Progress√£o Aritm√©tica</div>
                <div class="nav-tab" data-tab="pg" tabindex="0" role="tab" aria-selected="false">Progress√£o Geom√©trica</div>
            </div>

            <div class="tab-content active" id="quadratica" role="tabpanel">
                <div class="year-separator">1¬∫ Ano do Ensino M√©dio</div>
                <p>Calcule as ra√≠zes da equa√ß√£o quadr√°tica: ax¬≤ + bx + c = 0</p>
                <div class="input-group">
                    <label for="quadA">Valor de a:</label>
                    <input type="number" id="quadA" placeholder="Digite o valor de a" step="any">
                </div>
                <div class="input-group">
                    <label for="quadB">Valor de b:</label>
                    <input type="number" id="quadB" placeholder="Digite o valor de b" step="any">
                </div>
                <div class="input-group">
                    <label for="quadC">Valor de c:</label>
                    <input type="number" id="quadC" placeholder="Digite o valor de c" step="any">
                </div>
                <button id="calcQuad" class="neumorphic-button blue-button">Calcular</button>
                <div class="results" id="quadResults">
                    <p>Preencha os valores e clique em calcular.</p>
                </div>
            </div>

            <div class="tab-content" id="potenciacao" role="tabpanel">
                <div class="year-separator">1¬∫ Ano do Ensino M√©dio</div>
                <p>Calcule a potencia√ß√£o com m√≥dulo: (a^b) mod m</p>
                <div class="input-group">
                    <label for="potBase">Base (a):</label>
                    <input type="number" id="potBase" placeholder="Digite a base">
                </div>
                <div class="input-group">
                    <label for="potExp">Expoente (b):</label>
                    <input type="number" id="potExp" placeholder="Digite o expoente">
                </div>
                <div class="input-group">
                    <label for="potMod">M√≥dulo (m):</label>
                    <input type="number" id="potMod" placeholder="Digite o m√≥dulo">
                </div>
                <button id="calcPot" class="neumorphic-button blue-button">Calcular</button>
                <div class="results" id="potResults">
                    <p>Preencha os valores e clique em calcular.</p>
                </div>
            </div>

            <div class="tab-content" id="logaritmo" role="tabpanel">
                <div class="year-separator">1¬∫ Ano do Ensino M√©dio</div>
                <p>Calcule logaritmos: log<sub>a</sub>(b)</p>
                <div class="input-group">
                    <label for="logBase">Base (a):</label>
                    <input type="number" id="logBase" placeholder="Digite a base" min="0" step="any">
                </div>
                <div class="input-group">
                    <label for="logNum">Logaritmando (b):</label>
                    <input type="number" id="logNum" placeholder="Digite o logaritmando" min="0" step="any">
                </div>
                <button id="calcLog" class="neumorphic-button blue-button">Calcular</button>
                <div class="results" id="logResults">
                    <p>Preencha os valores e clique em calcular.</p>
                </div>
            </div>

            <div class="tab-content" id="pa" role="tabpanel">
                <div class="year-separator">2¬∫ Ano do Ensino M√©dio</div>
                <p>Calcule termos e soma da Progress√£o Aritm√©tica (PA)</p>
                <div class="input-group">
                    <label for="paA1">Primeiro termo (a‚ÇÅ):</label>
                    <input type="number" id="paA1" placeholder="Digite o primeiro termo" step="any">
                </div>
                <div class="input-group">
                    <label for="paRazao">Raz√£o (r):</label>
                    <input type="number" id="paRazao" placeholder="Digite a raz√£o" step="any">
                </div>
                <div class="input-group">
                    <label for="paN">N√∫mero de termos:</label>
                    <input type="number" id="paN" placeholder="Digite o n√∫mero de termos" min="1">
                </div>
                <div class="input-group">
                    <label>O que deseja calcular?</label>
                    <select id="paCalcType">
                        <option value="termo">Termo espec√≠fico</option>
                        <option value="soma">Soma dos termos</option>
                        <option value="ambos">Ambos</option>
                    </select>
                </div>
                <div class="input-group" id="paTermoEspecifico">
                    <label for="paTermNum">N√∫mero do termo espec√≠fico:</label>
                    <input type="number" id="paTermNum" placeholder="Digite o n√∫mero do termo" min="1">
                </div>
                <button id="calcPA" class="neumorphic-button blue-button">Calcular</button>
                <div class="results" id="paResults">
                    <p>Preencha os valores e clique em calcular.</p>
                </div>
            </div>

            <div class="tab-content" id="pg" role="tabpanel">
                <div class="year-separator">2¬∫ Ano do Ensino M√©dio</div>
                <p>Calcule termos e soma da Progress√£o Geom√©trica (PG)</p>
                <div class="input-group">
                    <label for="pgA1">Primeiro termo (a‚ÇÅ):</label>
                    <input type="number" id="pgA1" placeholder="Digite o primeiro termo" step="any">
                </div>
                <div class="input-group">
                    <label for="pgRazao">Raz√£o (q):</label>
                    <input type="number" id="pgRazao" placeholder="Digite a raz√£o" step="any">
                </div>
                <div class="input-group">
                    <label for="pgN">N√∫mero de termos:</label>
                    <input type="number" id="pgN" placeholder="Digite o n√∫mero de termos" min="1">
                </div>
                <div class="input-group">
                    <label>O que deseja calcular?</label>
                    <select id="pgCalcType">
                        <option value="termo">Termo espec√≠fico</option>
                        <option value="soma">Soma dos termos</option>
                        <option value="infinita">Soma infinita (|q| < 1)</option>
                        <option value="ambos">Termo e soma</option>
                    </select>
                </div>
                <div class="input-group" id="pgTermoEspecifico">
                    <label for="pgTermNum">N√∫mero do termo espec√≠fico:</label>
                    <input type="number" id="pgTermNum" placeholder="Digite o n√∫mero do termo" min="1">
                </div>
                <button id="calcPG" class="neumorphic-button blue-button">Calcular</button>
                <div class="results" id="pgResults">
                    <p>Preencha os valores e clique em calcular.</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>¬© 2025 Floating Skies | Feito com amor no Brasil</p>
    </footer>

    <script>
        // Utility function for rounding numbers
        function roundToPlaces(value, places) {
            return Number(Math.round(parseFloat(value + 'e' + places)) + 'e-' + places);
        }

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
        let currentTheme = localStorage.getItem('theme');

        if (!currentTheme) {
            currentTheme = prefersDarkScheme.matches ? 'dark' : 'light';
        }

        if (currentTheme === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
            document.body.removeAttribute('data-theme');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }

        themeToggle.addEventListener('click', function() {
            if (document.body.getAttribute('data-theme') === 'dark') {
                document.body.removeAttribute('data-theme');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('theme', 'light');
            } else {
                document.body.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('theme', 'dark');
            }
        });

        // Tab functionality
        const navTabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');

        navTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');

                // Update active states
                navTabs.forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                tabContents.forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                tab.setAttribute('aria-selected', 'true');
                document.getElementById(tabId).classList.add('active');

                // Focus first input in the active tab
                setTimeout(() => {
                    const firstInput = document.querySelector(`#${tabId} input:first-of-type`);
                    if (firstInput) {
                        firstInput.focus();
                    }
                }, 100);
            });

            // Keyboard navigation
            tab.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    tab.click();
                }
            });
        });

        // Quadratic function calculation
        document.getElementById('calcQuad').addEventListener('click', () => {
            const a = parseFloat(document.getElementById('quadA').value);
            const b = parseFloat(document.getElementById('quadB').value);
            const c = parseFloat(document.getElementById('quadC').value);
            const resultsDiv = document.getElementById('quadResults');

            if (isNaN(a) || isNaN(b) || isNaN(c) || a === 0) {
                resultsDiv.innerHTML = '<p>Por favor, preencha todos os campos corretamente. O valor de "a" n√£o pode ser zero.</p>';
                return;
            }

            const delta = b * b - 4 * a * c;
            let results = `<p><strong>Equa√ß√£o:</strong> ${a}x¬≤ ${b >= 0 ? '+ ' + b : '- ' + Math.abs(b)}x ${c >= 0 ? '+ ' + c : '- ' + Math.abs(c)} = 0</p>`;
            results += `<p><strong>Œî (Delta):</strong> ${delta}</p>`;

            if (delta < 0) {
                results += '<p><strong>Resultado:</strong> A equa√ß√£o n√£o possui ra√≠zes reais.</p>';
            } else if (delta === 0) {
                const x = -b / (2 * a);
                results += `<p><strong>Resultado:</strong> A equa√ß√£o possui uma √∫nica raiz real.</p>`;
                results += `<p><strong>x =</strong> ${roundToPlaces(x, 4)}</p>`;
            } else {
                const x1 = (-b + Math.sqrt(delta)) / (2 * a);
                const x2 = (-b - Math.sqrt(delta)) / (2 * a);
                results += '<p><strong>Resultado:</strong> A equa√ß√£o possui duas ra√≠zes reais.</p>';
                results += `<p><strong>x‚ÇÅ =</strong> ${roundToPlaces(x1, 4)}</p>`;
                results += `<p><strong>x‚ÇÇ =</strong> ${roundToPlaces(x2, 4)}</p>`;
            }

            results += `<p><strong>V√©rtice:</strong> (${roundToPlaces(-b / (2 * a), 4)}, ${roundToPlaces(-delta / (4 * a), 4)})</p>`;
            resultsDiv.innerHTML = results;
        });

        // Power with modulo calculation
        document.getElementById('calcPot').addEventListener('click', () => {
            const base = parseInt(document.getElementById('potBase').value);
            const expoente = parseInt(document.getElementById('potExp').value);
            const modulo = parseInt(document.getElementById('potMod').value);
            const resultsDiv = document.getElementById('potResults');

            if (isNaN(base) || isNaN(expoente) || isNaN(modulo) || modulo <= 0) {
                resultsDiv.innerHTML = '<p>Por favor, preencha todos os campos corretamente. O m√≥dulo deve ser maior que zero.</p>';
                return;
            }

            function modPow(base, exponent, modulus) {
                if (modulus === 1) return 0;
                let result = 1;
                base = base % modulus;
                while (exponent > 0) {
                    if (exponent % 2 === 1) {
                        result = (result * base) % modulus;
                    }
                    exponent = Math.floor(exponent / 2);
                    base = (base * base) % modulus;
                }
                return result;
            }

            const result = modPow(base, expoente, modulo);
            let html = `<p><strong>C√°lculo:</strong> (${base}<sup>${expoente}</sup>) mod ${modulo}</p>`;
            html += `<p><strong>Resultado:</strong> ${result}</p>`;
            resultsDiv.innerHTML = html;
        });

        // Logarithm calculation
        document.getElementById('calcLog').addEventListener('click', () => {
            const base = parseFloat(document.getElementById('logBase').value);
            const num = parseFloat(document.getElementById('logNum').value);
            const resultsDiv = document.getElementById('logResults');

            if (isNaN(base) || isNaN(num) || base <= 0 || base === 1 || num <= 0) {
                resultsDiv.innerHTML = '<p>Por favor, preencha todos os campos corretamente. A base deve ser positiva e diferente de 1, e o logaritmando deve ser positivo.</p>';
                return;
            }

            const result = Math.log(num) / Math.log(base);
            let html = `<p><strong>C√°lculo:</strong> log<sub>${base}</sub>(${num})</p>`;
            html += `<p><strong>Resultado:</strong> ${roundToPlaces(result, 6)}</p>`;
            html += '<p><strong>Propriedades dos logaritmos:</strong></p>';
            html += '<ul>';
            if (num > 1 && base > 1) {
                html += `<li>log<sub>${base}</sub>(${num} √ó ${num}) = log<sub>${base}</sub>(${num}) + log<sub>${base}</sub>(${num}) = ${roundToPlaces(result * 2, 6)}</li>`;
            }
            if (num > 1) {
                html += `<li>log<sub>${base}</sub>(${num}<sup>2</sup>) = 2 √ó log<sub>${base}</sub>(${num}) = ${roundToPlaces(result * 2, 6)}</li>`;
            }
            html += '</ul>';
            resultsDiv.innerHTML = html;
        });

        // Arithmetic Progression calculation
        document.getElementById('calcPA').addEventListener('click', () => {
            const a1 = parseFloat(document.getElementById('paA1').value);
            const razao = parseFloat(document.getElementById('paRazao').value);
            const n = parseInt(document.getElementById('paN').value);
            const calcType = document.getElementById('paCalcType').value;
            const resultsDiv = document.getElementById('paResults');

            if (isNaN(a1) || isNaN(razao) || isNaN(n) || n <= 0) {
                resultsDiv.innerHTML = '<p>Por favor, preencha todos os campos corretamente.</p>';
                return;
            }

            let html = `<p><strong>Progress√£o Aritm√©tica:</strong> a‚ÇÅ = ${a1}, raz√£o (r) = ${razao}, n = ${n}</p>`;

            const calcTermoEspecifico = (num) => a1 + (num - 1) * razao;
            const calcSoma = () => {
                const an = calcTermoEspecifico(n);
                return (n / 2) * (a1 + an);
            };

            if (calcType === 'termo' || calcType === 'ambos') {
                const termNum = parseInt(document.getElementById('paTermNum').value);
                if (isNaN(termNum) || termNum <= 0) {
                    html += '<p>Por favor, digite um n√∫mero v√°lido para o termo espec√≠fico.</p>';
                } else {
                    const termoEspecifico = calcTermoEspecifico(termNum);
                    html += `<p><strong>Termo a<sub>${termNum}</sub>:</strong> ${roundToPlaces(termoEspecifico, 4)}</p>`;
                    html += `<p><strong>F√≥rmula utilizada:</strong> a<sub>n</sub> = a<sub>1</sub> + (n - 1) √ó r</p>`;
                }
            }

            if (calcType === 'soma' || calcType === 'ambos') {
                const soma = calcSoma();
                html += `<p><strong>Soma dos ${n} primeiros termos:</strong> ${roundToPlaces(soma, 4)}</p>`;
                html += `<p><strong>F√≥rmula utilizada:</strong> S<sub>n</sub> = (n/2) √ó (a<sub>1</sub> + a<sub>n</sub>)</p>`;
            }

            const maxTermsToShow = Math.min(n, 10);
            html += `<p><strong>Primeiros ${maxTermsToShow} termos:</strong> `;
            let termos = [];
            for (let i = 1; i <= maxTermsToShow; i++) {
                termos.push(roundToPlaces(calcTermoEspecifico(i), 2));
            }
            html += termos.join(', ');
            if (n > 10) {
                html += ', ...';
            }
            html += '</p>';

            resultsDiv.innerHTML = html;
        });

        // Geometric Progression calculation
        document.getElementById('calcPG').addEventListener('click', () => {
            const a1 = parseFloat(document.getElementById('pgA1').value);
            const razao = parseFloat(document.getElementById('pgRazao').value);
            const n = parseInt(document.getElementById('pgN').value);
            const calcType = document.getElementById('pgCalcType').value;
            const resultsDiv = document.getElementById('pgResults');

            if (isNaN(a1) || isNaN(razao) || isNaN(n) || n <= 0 || razao === 0) {
                resultsDiv.innerHTML = '<p>Por favor, preencha todos os campos corretamente. A raz√£o n√£o pode ser zero.</p>';
                return;
            }

            let html = `<p><strong>Progress√£o Geom√©trica:</strong> a‚ÇÅ = ${a1}, raz√£o (q) = ${razao}, n = ${n}</p>`;

            const calcTermoEspecifico = (num) => a1 * Math.pow(razao, num - 1);
            const calcSoma = () => {
                if (razao === 1) {
                    return a1 * n;
                } else {
                    return a1 * (1 - Math.pow(razao, n)) / (1 - razao);
                }
            };

            const calcSomaInfinita = () => {
                if (Math.abs(razao) >= 1) {
                    return 'A soma infinita s√≥ existe quando |q| < 1';
                } else {
                    return a1 / (1 - razao);
                }
            };

            if (calcType === 'termo' || calcType === 'ambos') {
                const termNum = parseInt(document.getElementById('pgTermNum').value);
                if (isNaN(termNum) || termNum <= 0) {
                    html += '<p>Por favor, digite um n√∫mero v√°lido para o termo espec√≠fico.</p>';
                } else {
                    const termoEspecifico = calcTermoEspecifico(termNum);
                    html += `<p><strong>Termo a<sub>${termNum}</sub>:</strong> ${roundToPlaces(termoEspecifico, 4)}</p>`;
                    html += `<p><strong>F√≥rmula utilizada:</strong> a<sub>n</sub> = a<sub>1</sub> √ó q<sup>(n-1)</sup></p>`;
                }
            }

            if (calcType === 'soma' || calcType === 'ambos') {
                const soma = calcSoma();
                html += `<p><strong>Soma dos ${n} primeiros termos:</strong> ${roundToPlaces(soma, 4)}</p>`;
                if (razao === 1) {
                    html += `<p><strong>F√≥rmula utilizada:</strong> S<sub>n</sub> = a<sub>1</sub> √ó n</p>`;
                } else {
                    html += `<p><strong>F√≥rmula utilizada:</strong> S<sub>n</sub> = a<sub>1</sub> √ó (1 - q<sup>n</sup>) / (1 - q)</p>`;
                }
            }

            if (calcType === 'infinita') {
                const somaInfinita = calcSomaInfinita();
                html += `<p><strong>Soma infinita:</strong> `;
                if (typeof somaInfinita === 'string') {
                    html += somaInfinita;
                } else {
                    html += `${roundToPlaces(somaInfinita, 4)}`;
                }
                html += `</p>`;
                html += `<p><strong>F√≥rmula utilizada:</strong> S<sub>‚àû</sub> = a<sub>1</sub> / (1 - q)</p>`;
            }

            const maxTermsToShow = Math.min(n, 10);
            html += `<p><strong>Primeiros ${maxTermsToShow} termos:</strong> `;
            let termos = [];
            for (let i = 1; i <= maxTermsToShow; i++) {
                termos.push(roundToPlaces(calcTermoEspecifico(i), 2));
            }
            html += termos.join(', ');
            if (n > 10) {
                html += ', ...';
            }
            html += '</p>';

            resultsDiv.innerHTML = html;
        });

        // Show/hide term specific input based on calculation type
        document.getElementById('paCalcType').addEventListener('change', function() {
            const termField = document.getElementById('paTermoEspecifico');
            if (this.value === 'termo' || this.value === 'ambos') {
                termField.style.display = 'block';
            } else {
                termField.style.display = 'none';
            }
        });

        document.getElementById('pgCalcType').addEventListener('change', function() {
            const termField = document.getElementById('pgTermoEspecifico');
            if (this.value === 'termo' || this.value === 'ambos') {
                termField.style.display = 'block';
            } else {
                termField.style.display = 'none';
            }
        });

        // Initialize term specific input visibility
        document.getElementById('paTermoEspecifico').style.display = 'block';
        document.getElementById('pgTermoEspecifico').style.display = 'block';

        // Add keyboard support for Enter key to trigger calculations
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const currentTab = input.closest('.tab-content');
                    const calcButton = currentTab.querySelector('button');
                    if (calcButton) {
                        calcButton.click();
                    }
                }
            });
        });
    </script>
</body>
</html>
